{% extends 'game/base.html' %}

{% block breadcrumbs %}
<nav class="breadcrumbs">
    <a href="{% url 'game:index' %}" class="crumb">Главная</a>
    <span class="crumb-sep">/</span>
    <span class="crumb crumb-active">Турниры</span>
</nav>
{% endblock %}

{% block content %}
  <h1 class="page-title">Игровые сессии</h1>

  {% if sessions %}
    <table class="sessions-table">
      <thead>
        <tr>
          <th data-sort-type="number">ID</th>
          <th data-sort-type="text">Режим</th>
          <th data-sort-type="text">Статус</th>
          <th data-sort-type="number">Игроков</th>
          <th data-sort-type="text">Победитель</th>
          <th data-sort-type="text">Создана</th>
        </tr>
      </thead>
      <tbody>
        {% for s in sessions %}
          <tr>
            <td>{{ s.id }}</td>
            <td>{{ s.mode.name }}</td>

            <td>{{ s.get_status_display }}</td>

            <td>{{ s.players_count }}</td>

            <!-- победитель, если игра завершена и есть Result -->
            <td>
              {% if s.result %}
                {{ s.result.get_winner_side_display }}
              {% else %}
                —
              {% endif %}
            </td>

            <td>{{ s.created_at|date:"d.m.Y H:i" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Сессий пока нет.</p>
  {% endif %}
{% endblock %}
